<hc:Window x:Class="MSL.ServerRunner"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:hc="https://handyorg.github.io/handycontrol"
        xmlns:controls="clr-namespace:MSL.controls"
        xmlns:langs="clr-namespace:MSL.langs"
        xmlns:local="clr-namespace:MSL"
        mc:Ignorable="d"
        Title="ServerRunner"
        Height="500" Width="800"
        MinHeight="500" MinWidth="800"
        Background="{DynamicResource BackgroundBrush}"
        NonClientAreaBackground="{DynamicResource DarkPrimaryBrush}"
        NonClientAreaHeight="40" NonClientAreaFontsize="14" NonClientAreaIconWidth="20" NonClientAreaIconHeight="20"
        CloseButtonForeground="White" OtherButtonForeground="White" OtherButtonHoverForeground="White"
        Icon="../icon.ico"
        Loaded="Window_Loaded" Closing="Window_Closing" Activated="Window_Activated" Deactivated="Window_Deactivated"
        LocationChanged="Window_LocationChanged" SizeChanged="Window_SizeChanged"
        WindowStartupLocation="CenterScreen" IsVisibleChanged="Window_IsVisibleChanged">
    <Grid x:Name="MainGrid">
        <TabControl x:Name="TabCtrl" SelectionChanged="TabCtrl_SelectionChanged" Style="{StaticResource TabControlSideMenu}">
            <TabControl.Resources>
                <Style x:Key="GridAnimation" TargetType="Grid">
                    <Setter Property="RenderTransform">
                        <Setter.Value>
                            <TranslateTransform/>
                        </Setter.Value>
                    </Setter>
                    <Style.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard Storyboard="{StaticResource ShowPage}"/>
                        </EventTrigger>
                    </Style.Triggers>
                </Style>
            </TabControl.Resources>
            <TabItem x:Name="Tab_Home" Width="50" Style="{StaticResource TabItemSideMenu}">
                <TabItem.Header>
                    <controls:TabControlHeader Icon="{DynamicResource homeDrawingImage}" Text="仪表盘"/>
                </TabItem.Header>
                <Grid Style="{StaticResource GridAnimation}">
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <controls:MagicCard Grid.Column="0" Margin="10" Padding="0">
                            <hc:ScrollViewer IsInertiaEnabled="True" Margin="5" Padding="5">
                                <StackPanel>
                                    <Label Content="服务器基本信息" Style="{StaticResource BorderTitle}"/>
                                    <Grid>
                                        <Grid.Resources>
                                            <Style TargetType="Label" BasedOn="{StaticResource {x:Type Label}}">
                                                <Setter Property="HorizontalAlignment" Value="Stretch"/>
                                                <Setter Property="VerticalAlignment" Value="Center"/>
                                                <Setter Property="Height" Value="32"/>
                                                <Setter Property="Margin" Value="90,0,0,0"/>
                                                <Setter Property="FontSize" Value="14"/>
                                            </Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}"/>
                                                <Setter Property="VerticalAlignment" Value="Center"/>
                                                <Setter Property="Margin" Value="10,0,0,0"/>
                                                <Setter Property="FontSize" Value="14"/>
                                            </Style>
                                        </Grid.Resources>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="45"/>
                                            <RowDefinition Height="45"/>
                                            <RowDefinition Height="45"/>
                                            <RowDefinition Height="45"/>
                                            <RowDefinition Height="45"/>
                                            <RowDefinition Height="45"/>
                                            <RowDefinition Height="45"/>
                                        </Grid.RowDefinitions>
                                        <TextBlock Grid.Row="0" Text="服务器状态"/>
                                        <Label Grid.Row="0" x:Name="serverStateLab" Content="已关闭" Foreground="Green"/>
                                        <TextBlock Grid.Row="1" Text="正版验证"/>
                                        <Label Grid.Row="1" x:Name="onlineModeLab" Content="获取中"/>
                                        <TextBlock Grid.Row="2" Text="游戏模式"/>
                                        <Label Grid.Row="2" x:Name="gameTypeLab" Content="获取中"/>
                                        <TextBlock Grid.Row="3" Text="游戏难度"/>
                                        <Label Grid.Row="3" x:Name="gameDifficultyLab" Content="获取中"/>
                                        <TextBlock Grid.Row="4" Text="服务器IP"/>
                                        <Label Grid.Row="4" x:Name="serverIPLab" Content="获取中"/>
                                        <TextBlock Grid.Row="5" Text="本地进入IP"/>
                                        <Label Grid.Row="5" x:Name="localServerIPLab" Content="获取中"/>
                                        <TextBlock Grid.Row="6" Text="远程进入IP"/>
                                        <Button Grid.Row="6" x:Name="gotoFrpc" HorizontalAlignment="Stretch" Margin="90,0,0,0" VerticalAlignment="Center" Height="32" Content="点击获取" FontSize="14" Click="gotoFrpc_Click"/>
                                    </Grid>
                                    <Label Margin="0,20,0,0" Content="系统占用" Style="{StaticResource BorderTitle}"/>
                                    <Grid Margin="0,10,0,20">
                                        <Label x:Name="cpuInfoLab" Content="CPU占用" Height="30" VerticalAlignment="Top" HorizontalAlignment="Stretch"/>
                                        <ProgressBar x:Name="cpuInfoBar" Style="{StaticResource ProgressBarFlat}" Height="25" Margin="0,40,0,0" VerticalAlignment="Top"/>
                                        <Label x:Name="memoryInfoLab" Content="内存占用" Height="60" Margin="0,80,0,0" VerticalAlignment="Top" HorizontalAlignment="Stretch"/>
                                        <Label x:Name="usedMemoryLab" Content="系统已用内存" Height="30" Margin="0,150,0,0" VerticalAlignment="Top" HorizontalAlignment="Stretch"/>
                                        <ProgressBar x:Name="memoryInfoBar" Style="{StaticResource ProgressBarFlat}" Height="25" Margin="0,190,0,0" VerticalAlignment="Top"/>
                                        <Label x:Name="availableMemoryInfoLab" Content="系统空闲内存" Height="30" Margin="0,225,0,0" HorizontalAlignment="Stretch" VerticalAlignment="Top"/>
                                        <ProgressBar x:Name="availableMemoryInfoBar" Style="{StaticResource ProgressBarFlat}" Height="25" Margin="0,265,0,0" VerticalAlignment="Top"/>
                                    </Grid>
                                </StackPanel>
                            </hc:ScrollViewer>
                        </controls:MagicCard>
                        <Grid Grid.Column="1">
                            <Grid.RowDefinitions>
                                <RowDefinition/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>
                            <Border Grid.Row="0" Style="{StaticResource MagicBorder}" Margin="0,10,10,10" VerticalAlignment="Stretch" >
                                <Grid>
                                    <Label Content="日志输出" Style="{StaticResource BorderTitle}"/>
                                    <TextBox x:Name="previewOutlog" Margin="5,35,5,5" IsReadOnly="True" TextWrapping="Wrap" VerticalContentAlignment="Top" FontSize="14" Padding="10" VerticalScrollBarVisibility="Auto"/>
                                </Grid>
                            </Border>
                            <Border Grid.Row="1" Style="{StaticResource MagicBorder}" VerticalAlignment="Stretch" Margin="0,0,10,10" >
                                <Grid>
                                    <Label Content="玩家列表" Style="{StaticResource BorderTitle}"/>
                                    <ListBox x:Name="serverPlayerList" hc:ScrollViewer.HorizontalScrollBarVisibility="Auto" hc:Empty.ShowEmpty="true" Margin="5,35,5,5">
                                        <ListBox.ContextMenu>
                                            <ContextMenu>
                                                <MenuItem x:Name="kickPlayer" Click="kickPlayer_Click" Header="踢出玩家"/>
                                                <MenuItem x:Name="banPlayer" Click="banPlayer_Click" Header="封禁玩家"/>
                                            </ContextMenu>
                                        </ListBox.ContextMenu>
                                    </ListBox>
                                </Grid>
                            </Border>
                        </Grid>
                    </Grid>
                    <Grid Grid.Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <ToggleButton x:Name="controlServer1" Grid.Column="0" hc:IconElement.Geometry="{StaticResource CheckedGeometry}" hc:IconElement.Width="18" FontSize="14" Margin="10,0,10,10" Click="controlServer_Click" MouseDoubleClick="controlServer_MouseDoubleClick">
                            <ToggleButton.Style>
                                <Style TargetType="ToggleButton" BasedOn="{StaticResource ToggleButtonPrimary.NoCheckedBorder}">
                                    <Style.Triggers>
                                        <Trigger Property="IsChecked" Value="True">
                                            <Setter Property="Content" Value="{Binding [Form_ServerRunner_Stop], Source={x:Static langs:LanguageManager.Instance}}" />
                                        </Trigger>
                                        <Trigger Property="IsChecked" Value="False">
                                            <Setter Property="Content" Value="{Binding [Form_ServerRunner_Launch], Source={x:Static langs:LanguageManager.Instance}}" />
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </ToggleButton.Style>
                        </ToggleButton>
                        <Button x:Name="solveProblemBtn" Grid.Column="1" hc:IconElement.Geometry="{StaticResource AskGeometry}" hc:IconElement.Height="18" Style="{StaticResource ButtonDanger}" Content="崩溃检测"  Height="60" Click="solveProblemBtn_Click" FontSize="14" VerticalAlignment="Bottom" Margin="0,0,10,10" HorizontalAlignment="Stretch"/>
                        <Button x:Name="openServerDir" Grid.Column="2" Content="打开服务器目录" Height="60" VerticalAlignment="Bottom" HorizontalAlignment="Stretch" Margin="0,0,10,10" FontSize="14" Click="openServerDir_Click"/>
                    </Grid>
                </Grid>
            </TabItem>
            <TabItem x:Name="Tab_Console" Width="50" Style="{StaticResource TabItemSideMenu}">
                <TabItem.Header>
                    <controls:TabControlHeader Icon="{DynamicResource terminal_2DrawingImage}" Text="控制台"/>
                </TabItem.Header>
                <Grid x:Name="CmdGrid" Style="{StaticResource GridAnimation}">
                    <RichTextBox x:Name="outlog" IsUndoEnabled="False" UndoLimit="0" Background="{DynamicResource BorderBackground}" IsReadOnly="True" Block.LineHeight="1" Margin="10,10,10,47" ContextMenu="{StaticResource UIContextMenu}" VerticalScrollBarVisibility="Visible">
                        <FlowDocument>
                            <Paragraph>
                                <Run Text="在此显示输出......"/>
                            </Paragraph>
                        </FlowDocument>
                    </RichTextBox>

                    <Grid VerticalAlignment="Bottom">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <ComboBox Grid.Column="0" x:Name="fastCMD" HorizontalAlignment="Left" Margin="10,0,5,10" SelectedIndex="0" IsEnabled="False" Width="100" Height="32">
                            <ComboBoxItem Content="/（指令）" FontFamily="Microsoft YaHei UI"/>
                            <ComboBoxItem Content="/op（给管理员）" FontFamily="Microsoft YaHei UI"/>
                            <ComboBoxItem Content="/deop（去除管理员）" FontFamily="Microsoft YaHei UI"/>
                            <ComboBoxItem Content="/ban（封禁玩家）" FontFamily="Microsoft YaHei UI"/>
                            <ComboBoxItem Content="/say（全服说话）" FontFamily="Microsoft YaHei UI"/>
                            <ComboBoxItem Content="/pardon（解除封禁）" FontFamily="Microsoft YaHei UI"/>
                        </ComboBox>
                        <TextBox x:Name="cmdtext" Grid.Column="1" Margin="0,0,5,10" Text="服务器已关闭" KeyDown="cmdtext_KeyDown" IsEnabled="False"/>
                        <Button x:Name="sendcmd" Grid.Column="2" Content="发送" Style="{StaticResource ButtonPrimary}" Width="60" Height="32" Margin="0,0,5,10" Click="sendcmd_Click" IsEnabled="False"/>
                        <ToggleButton x:Name="controlServer" Grid.Column="3" Margin="0,0,10,10" MinWidth="60" Height="32" Click="controlServer_Click" MouseDoubleClick="controlServer_MouseDoubleClick">
                            <ToggleButton.Style>
                                <Style TargetType="ToggleButton" BasedOn="{StaticResource ToggleButton.NoCheckedBorder}">

                                    <Style.Triggers>
                                        <Trigger Property="IsChecked" Value="True">
                                            <Setter Property="Content" Value="{Binding [Form_ServerRunner_Stop], Source={x:Static langs:LanguageManager.Instance}}" />
                                        </Trigger>
                                        <Trigger Property="IsChecked" Value="False">
                                            <Setter Property="Content" Value="{Binding [Form_ServerRunner_Launch], Source={x:Static langs:LanguageManager.Instance}}" />
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </ToggleButton.Style>
                        </ToggleButton>
                    </Grid>
                </Grid>
            </TabItem>
            <TabItem x:Name="Tab_Plugins" Width="50" Style="{StaticResource TabItemSideMenu}">
                <TabItem.Header>
                    <controls:TabControlHeader Icon="{DynamicResource filesDrawingImage}" Text="插件/模组"/>
                </TabItem.Header>
                <Grid Style="{StaticResource GridAnimation}">
                    <TabControl x:Name="pluginsAndModsTab" Margin="10,5,10,10" Style="{StaticResource TabControlCapsuleInLine}" Visibility="Hidden" Background="Transparent" BorderThickness="0">
                        <TabItem x:Name="pluginsTabItem" Header="服务器插件">
                            <controls:MagicCard>
                                <Grid>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Top">
                                        <TextBlock Text="插件列表" VerticalAlignment="Center" FontSize="18" FontWeight="Bold" Foreground="{DynamicResource PrimaryTextBrush}"/>
                                        <TextBlock Text="(插件变动在服务器重启后生效)" VerticalAlignment="Center" FontSize="16" Foreground="{DynamicResource PrimaryTextBrush}"/>
                                        <Button x:Name="reFresh_Copy" Content="刷新" Style="{StaticResource ButtonPrimary}" Click="reFresh_Click" Width="70" FontSize="14" Margin="5,0,0,0"/>
                                        <Button x:Name="DownloadPluginBtn" Content="下载插件" Width="80" FontSize="14" Click="DownloadPluginBtn_Click" Margin="5,0,0,0"/>
                                        <Button Content="帮助" Click="mpHelp_Click" Width="80" FontSize="14" Margin="5,0,0,0"/>
                                    </StackPanel>
                                    <ListView x:Name="pluginslist" hc:Empty.ShowEmpty="true" Margin="0,35,0,0" Padding="0" BorderThickness="0" Background="{DynamicResource BorderBackground}" FontSize="14">
                                        <ListBox.ContextMenu>
                                            <ContextMenu FontSize="14">
                                                <MenuItem Click="reFresh_Click" Header="刷新"/>
                                                <MenuItem x:Name="addPlugin" Click="addPlugin_Click" Header="添加插件"/>
                                                <MenuItem x:Name="disPlugin" Click="disPlugin_Click" Header="禁用/启用所选插件"/>
                                                <MenuItem x:Name="delPlugin" Click="delPlugin_Click" Header="删除插件"/>
                                                <MenuItem x:Name="disAllPlugin" Click="disAllPlugin_Click" Header="禁用/启用全部插件"/>
                                                <MenuItem x:Name="openpluginsDir" Click="openpluginsDir_Click" Header="打开插件文件夹"/>
                                            </ContextMenu>
                                        </ListBox.ContextMenu>
                                        <ListView.View>
                                            <GridView>
                                                <GridViewColumn x:Name="pluginlistPluginName" Width="400" Header="插件名称">
                                                    <GridViewColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <Grid>
                                                                <TextBlock Width="Auto" Text="{Binding PluginName}"/>
                                                            </Grid>
                                                        </DataTemplate>
                                                    </GridViewColumn.CellTemplate>
                                                </GridViewColumn>
                                                <GridViewColumn Width="100" Header="操作">
                                                    <GridViewColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <Grid>
                                                                <Button Margin="0,0,0,0" hc:IconElement.Geometry="{StaticResource WindowMinGeometry}" hc:IconElement.Width="14" HorizontalAlignment="Left" hc:Poptip.Content="禁用/启用该插件" hc:Poptip.HorizontalOffset="40" hc:Poptip.Placement="Left" Click="disPlugin_Click"/>
                                                                <Button Margin="40,0,0,0" hc:IconElement.Geometry="{StaticResource DeleteFillCircleGeometry}" hc:IconElement.Height="14" HorizontalAlignment="Left" hc:Poptip.Content="删除该插件" hc:Poptip.HorizontalOffset="40" hc:Poptip.Placement="Left" Click="delPlugin_Click"/>
                                                            </Grid>
                                                        </DataTemplate>
                                                    </GridViewColumn.CellTemplate>
                                                </GridViewColumn>
                                            </GridView>
                                        </ListView.View>
                                    </ListView>
                                    <Button x:Name="addPluginBtn" Margin="0,0,12,12" Style="{StaticResource ButtonPrimary}" hc:IconElement.Geometry="{StaticResource AddGeometry}" hc:IconElement.Height="16" hc:BorderElement.CornerRadius="30" VerticalAlignment="Bottom" Height="48" Width="48" Click="addPlugin_Click" HorizontalAlignment="Right"/>
                                </Grid>
                            </controls:MagicCard>
                        </TabItem>
                        <TabItem x:Name="modsTabItem" Header="服务器模组">
                            <controls:MagicCard>
                                <Grid>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Top">
                                        <TextBlock Text="模组列表" VerticalAlignment="Center" FontSize="18" FontWeight="Bold" Foreground="{DynamicResource PrimaryTextBrush}"/>
                                        <TextBlock Text="(模组变动在服务器重启后生效)" VerticalAlignment="Center" FontSize="16" Foreground="{DynamicResource PrimaryTextBrush}"/>
                                        <Button x:Name="reFresh_Copy2" Content="刷新" Style="{StaticResource ButtonPrimary}" Click="reFresh_Click" Width="60" FontSize="14" Margin="5,0,0,0"/>
                                        <Button x:Name="addModsTip" Content="添加模组必看" Style="{StaticResource ButtonPrimary}" FontSize="14" Margin="5,0,0,0" Width="110" Click="addModsTip_Click"/>
                                        <Button x:Name="DownloadModBtn" Content="下载模组" Click="DownloadModBtn_Click" Width="80" FontSize="14" Margin="5,0,0,0"/>
                                        <Button Content="帮助" Click="mpHelp_Click" Width="60" FontSize="14" Margin="5,0,0,0"/>
                                    </StackPanel>
                                    <ListView x:Name="modslist" hc:Empty.ShowEmpty="true" BorderThickness="0" Margin="0,35,0,0" Padding="0" Background="{DynamicResource BorderBackground}" FontSize="14">
                                        <ListBox.ContextMenu>
                                            <ContextMenu FontSize="14">
                                                <MenuItem Click="reFresh_Click" Header="刷新"/>
                                                <MenuItem x:Name="addMod" Click="addMod_Click" Header="添加模组"/>
                                                <MenuItem x:Name="disMod" Click="disMod_Click" Header="禁用/启用所选模组"/>
                                                <MenuItem x:Name="delMod" Click="delMod_Click" Header="删除模组"/>
                                                <MenuItem x:Name="disAllMod" Click="disAllMod_Click" Header="禁用/启用全部模组"/>
                                                <MenuItem x:Name="openmodsDir" Click="openmodsDir_Click" Header="打开模组文件夹"/>
                                            </ContextMenu>
                                        </ListBox.ContextMenu>
                                        <ListView.View>
                                            <GridView>
                                                <GridViewColumn x:Name="modlistModName" Width="400" Header="模组名称">
                                                    <GridViewColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <Grid>
                                                                <TextBlock Width="Auto" Text="{Binding ModName}"/>
                                                            </Grid>
                                                        </DataTemplate>
                                                    </GridViewColumn.CellTemplate>
                                                </GridViewColumn>
                                                <GridViewColumn Width="100" Header="操作">
                                                    <GridViewColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <Grid>
                                                                <Button Margin="0,0,0,0" hc:IconElement.Geometry="{StaticResource WindowMinGeometry}" hc:IconElement.Width="14" HorizontalAlignment="Left" hc:Poptip.Content="禁用/启用该模组" hc:Poptip.HorizontalOffset="40" hc:Poptip.Placement="Left" Click="disMod_Click"/>
                                                                <Button Margin="40,0,0,0" hc:IconElement.Geometry="{StaticResource DeleteFillCircleGeometry}" hc:IconElement.Height="14" HorizontalAlignment="Left" hc:Poptip.Content="删除该模组" hc:Poptip.HorizontalOffset="40" hc:Poptip.Placement="Left" Click="delMod_Click"/>
                                                            </Grid>
                                                        </DataTemplate>
                                                    </GridViewColumn.CellTemplate>
                                                </GridViewColumn>
                                            </GridView>
                                        </ListView.View>
                                    </ListView>
                                    <Button x:Name="addModBtn" Margin="0,0,12,12" Style="{StaticResource ButtonPrimary}" hc:IconElement.Geometry="{StaticResource AddGeometry}" hc:IconElement.Height="16" hc:BorderElement.CornerRadius="30" VerticalAlignment="Bottom" Height="48" Width="48" Click="addMod_Click" HorizontalAlignment="Right"/>
                                </Grid>
                            </controls:MagicCard>
                        </TabItem>
                    </TabControl>
                    <controls:MagicCard x:Name="NoPluginModTip" HorizontalAlignment="Center" VerticalAlignment="Center" Padding="15">
                        <StackPanel>
                            <TextBlock Text="未检测到任何插件或模组" Foreground="{DynamicResource DarkPrimaryBrush}" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center" Margin="10"/>
                            <TextBlock Text="未检测到plugins和mods文件夹，您所使用的服务端核心支持这些功能吗？&#xA;请重启服务器并检查所用服务端是否支持相应功能后再试" TextAlignment="Center" TextWrapping="Wrap" Foreground="{DynamicResource PrimaryTextBrush}" FontSize="16"/>
                            <Button x:Name="reFresh" Content="刷新" Style="{StaticResource ButtonPrimary}" Height="32" Click="reFresh_Click" Margin="10" Width="100" FontSize="16"/>
                        </StackPanel>
                    </controls:MagicCard>
                </Grid>
            </TabItem>
            <TabItem x:Name="Tab_Settings" Width="50" Style="{StaticResource TabItemSideMenu}">
                <TabItem.Header>
                    <controls:TabControlHeader Icon="{DynamicResource adjustments_horizontalDrawingImage}" Text="服务器设置"/>
                </TabItem.Header>
                <Grid Style="{StaticResource GridAnimation}">
                    <controls:MagicScrollViewer>
                        <controls:MagicCard Margin="0,10,0,0">
                            <StackPanel>
                                <StackPanel>
                                    <Label Content="服务器信息" Style="{StaticResource BorderTitle}"/>
                                    <Grid>
                                        <Label Content="服务器名称：" Style="{StaticResource MagicLabel14}"/>
                                        <TextBox x:Name="nAme" MaxLines="1" AutoWordSelection="True" Margin="125,0,0,0" VerticalAlignment="Top"/>
                                        <Label Content="服务器存放目录：" Style="{StaticResource MagicLabel14}" Margin="0,35,0,0" />
                                        <TextBox x:Name="bAse" MaxLines="1" AutoWordSelection="True" VerticalAlignment="Top" Margin="125,35,65,0"/>
                                        <Button x:Name="a0" Content="浏览" Width="60" VerticalAlignment="Top" HorizontalAlignment="Right" Margin="0,35,0,0" Click="a0_Click"/>
                                    </Grid>
                                </StackPanel>
                                <StackPanel Margin="0,10,0,0">
                                    <Label Content="服务器设置" Style="{StaticResource BorderTitle}"/>
                                    <Grid x:Name="GridJavaSet">
                                        <Label Content="Java地址：" Style="{StaticResource MagicLabel14}"/>
                                        <RadioButton x:Name="useSelf" Content="手动选择Java" IsChecked="True" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="125,5,0,0"/>
                                        <TextBox x:Name="jAva" MaxLines="1" AutoWordSelection="True" VerticalAlignment="Top" Margin="250,0,65,0"/>
                                        <Button x:Name="a03" Content="浏览" Width="60" Click="a03_Click" FontWeight="Normal" FontSize="12" Height="28" VerticalAlignment="Top" HorizontalAlignment="Right"/>
                                        <RadioButton x:Name="useDownJv" Content="开服器在线下载" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="125,40,0,0"/>
                                        <ComboBox x:Name="selectJava" Width="200" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="250,35,0,0"/>
                                        <RadioButton x:Name="usecheckedjv" Content="电脑上的Java" Margin="125,75,0,0" VerticalAlignment="Top" HorizontalAlignment="Left" Checked="usecheckedjv_Checked"/>
                                        <ComboBox x:Name="selectCheckedJavaComb" Margin="250,70,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" Width="200"/>
                                        <Button x:Name="ScanJava" Content="点我搜索" HorizontalAlignment="Left" Margin="455,70,0,0" VerticalAlignment="Top" Click="ScanJava_Click"/>
                                        <RadioButton x:Name="useJvpath" Content="使用环境变量" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="125,110,0,0" Click="useJvpath_Click"/>
                                    </Grid>
                                    <hc:Divider Margin="0,10,0,10" x:Name="DivJavaSet"/>
                                    <Grid x:Name="GridServerCore">
                                        <Label Content="服务端核心文件：" Style="{StaticResource MagicLabel14}"/>
                                        <TextBox x:Name="server" MaxLines="1" AutoWordSelection="True" Margin="125,0,220,0"/>
                                        <Button x:Name="a01" Content="浏览" Width="60" Click="a01_Click" HorizontalAlignment="Right" Margin="0,0,155,0"/>
                                        <Button x:Name="downloadServer" hc:IconElement.Geometry="{StaticResource DownloadGeometry}" Content="下载服务端" Width="150" Click="downloadServer_Click" HorizontalAlignment="Right"/>
                                    </Grid>
                                    <hc:Divider Margin="0,10,0,10" x:Name="DivRemSet"/>
                                    <Grid x:Name="GridJavaRem">
                                        <Label Content="服务器运行内存：" Style="{StaticResource MagicLabel14}"/>
                                        <ToggleButton x:Name="autoSetMemory" Content="让Java自动分配" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="125,0,0,0" Style="{StaticResource ToggleButtonSwitch}" Click="autoSetMemory_Click"/>
                                        <hc:RangeSlider x:Name="memorySlider" ValueChanged="memorySlider_ValueChanged" Height="18" VerticalAlignment="Top" Margin="125,35,180,5"/>
                                        <TextBox x:Name="memoryInfo" Text="当前为自动分配" Foreground="{DynamicResource DarkPrimaryBrush}" TextAlignment="Center" TextChanged="memoryInfo_TextChanged" Width="165" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    </Grid>
                                    <hc:Divider Margin="0,10,0,10" x:Name="DivJvmSet"/>
                                    <Grid>
                                        <Label x:Name="LabelArgsText" Content="服务器JVM参数：" Style="{StaticResource MagicLabel14}"/>
                                        <StackPanel Margin="125,0,0,0">
                                            <TextBox x:Name="jVMcmd" AutoWordSelection="True" VerticalAlignment="Top" AcceptsReturn="True" TextWrapping="Wrap"/>
                                            <Border Margin="0,5" Style="{StaticResource BorderTipPrimary}">
                                                <TextBlock x:Name="TextArgsTips" Text="提示：一般格式为 -参数，如 -Dlog4j2.formatMsgNoLookups=true，非必要无需填写" TextWrapping="Wrap" Foreground="{DynamicResource DarkPrimaryBrush}" FontSize="14" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                                            </Border>
                                        </StackPanel>
                                    </Grid>
                                    <hc:Divider Margin="0,10,0,10"/>
                                    <Grid>
                                        <Button x:Name="refreahConfig" Content="刷新" Style="{StaticResource ButtonPrimary}" Width="120" Height="35" FontSize="14" Click="refreahConfig_Click" HorizontalAlignment="Center" Margin="0,0,350,0"/>
                                        <Button x:Name="doneBtn1" Content="保存/应用" Style="{StaticResource ButtonPrimary}" Width="120" Click="doneBtn1_Click" Height="35" FontSize="14" HorizontalAlignment="Center" />
                                        <Button x:Name="getLaunchercode" Content="生成启动脚本" Style="{StaticResource ButtonPrimary}" Width="120" Height="35" FontSize="14" Click="getLaunchercode_Click" HorizontalAlignment="Center" Margin="350,0,0,0"/>
                                    </Grid>
                                </StackPanel>
                            </StackPanel>
                        </controls:MagicCard>
                        <controls:MagicCard Margin="0,0,0,20">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock x:Name="changeServerPropertiesLab" VerticalAlignment="Center" FontSize="18" FontWeight="Bold" Foreground="{DynamicResource PrimaryTextBrush}" Text="更改服务器配置"/>
                                    <Button x:Name="refreahServerConfig" Margin="10,0,0,0" Content="刷新" Width="80" Click="refreahServerConfig_Click"/>
                                </StackPanel>
                                <Grid x:Name="changeServerProperties" Margin="0,10,0,0">
                                    <Grid.Resources>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}"/>
                                        </Style>
                                        <Style TargetType="Label" BasedOn="{StaticResource MagicLabel14}"/>
                                    </Grid.Resources>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Label Grid.Row="0" Content="正版验证：" Margin="5" VerticalAlignment="Center" />
                                    <TextBox Grid.Row="0" x:Name="onlineModeText" Margin="100,0,0,0" TextWrapping="Wrap" Text="" VerticalAlignment="Center" Width="90" HorizontalAlignment="Left"/>
                                    <Label Grid.Row="1" Content="游戏模式：" Margin="5" VerticalAlignment="Center" />
                                    <TextBox Grid.Row="1" x:Name="gameModeText" Margin="100,0,0,0" TextWrapping="Wrap" Text="" VerticalAlignment="Center" Width="90" HorizontalAlignment="Left"/>
                                    <Label Grid.Row="2" Content="游戏难度：" Margin="5" VerticalAlignment="Center" />
                                    <TextBox Grid.Row="2" x:Name="gameDifficultyText" Margin="100,0,0,0" TextWrapping="Wrap" Text="" VerticalAlignment="Center" Width="90" HorizontalAlignment="Left"/>
                                    <Label Grid.Row="3" Content="游戏人数：" Margin="5" VerticalAlignment="Center" />
                                    <TextBox Grid.Row="3" x:Name="gamePlayerText" Margin="100,0,0,0" TextWrapping="Wrap" Text="" VerticalAlignment="Center" Width="90" HorizontalAlignment="Left"/>
                                    <Label Grid.Row="4" Content="服务器端口：" Margin="5" VerticalAlignment="Center" />
                                    <TextBox Grid.Row="4" x:Name="gamePortText" Margin="100,0,0,0" TextWrapping="Wrap" Text="" VerticalAlignment="Center" Width="90" HorizontalAlignment="Left"/>
                                    <Label Grid.Row="5" Content="命令方块：" Margin="5" VerticalAlignment="Center" />
                                    <TextBox Grid.Row="5" x:Name="commandBlockText" Margin="100,0,0,0" TextWrapping="Wrap" Text="" VerticalAlignment="Center" Width="90" HorizontalAlignment="Left"/>
                                    <Label Grid.Row="6" Content="视距：" Margin="5" VerticalAlignment="Center" />
                                    <TextBox Grid.Row="6" x:Name="viewDistanceText" Margin="100,0,0,0" TextWrapping="Wrap" Text="" VerticalAlignment="Center" Width="90" HorizontalAlignment="Left"/>
                                    <Label Grid.Row="7" Content="PVP：" Margin="5" VerticalAlignment="Center" />
                                    <TextBox Grid.Row="7" x:Name="gamePvpText" Margin="100,0,0,0" TextWrapping="Wrap" Text="" VerticalAlignment="Center" Width="90" HorizontalAlignment="Left"/>
                                    <Label Grid.Row="8" Content="主世界地图：" Margin="5" VerticalAlignment="Center" />
                                    <TextBox Grid.Row="8" x:Name="gameWorldText" Margin="100,0,0,0" TextWrapping="Wrap" Text="" VerticalAlignment="Center" Width="90" HorizontalAlignment="Left"/>
                                    <TextBlock Grid.Row="0" Margin="200,0,0,0" TextWrapping="Wrap" Text="注：online-mode，若开启（true），盗版/离线用户将无法进入该服务器，关闭请输入false" VerticalAlignment="Center"/>
                                    <TextBlock Grid.Row="1" Margin="200,0,0,0" TextWrapping="Wrap" Text="注：gamemode，不同版本改法不一致，具体可参照页面底部表格" VerticalAlignment="Center"/>
                                    <TextBlock Grid.Row="2" Margin="200,0,0,0" TextWrapping="Wrap" Text="注：difficulty，不同版本改法不一致，具体可参照页面底部表格" VerticalAlignment="Center"/>
                                    <TextBlock Grid.Row="3" Margin="200,0,0,0" TextWrapping="Wrap" Text="注：max-player，在此输入数字来改变服务器最大人数" VerticalAlignment="Center"/>
                                    <TextBlock Grid.Row="4" Margin="200,0,0,0" TextWrapping="Wrap" Text="注：server-port，非必要无需更改" VerticalAlignment="Center"/>
                                    <TextBlock Grid.Row="5" Margin="200,0,0,0" TextWrapping="Wrap" Text="注：enable-command-block，若开启(true)，服务器可使用命令方块，关闭请输入false" VerticalAlignment="Center"/>
                                    <TextBlock Grid.Row="6" Margin="200,0,0,0" TextWrapping="Wrap" Text="注：view-distance，和游戏内的渲染距离意思相近，设置过大会影响服务器性能" VerticalAlignment="Center"/>
                                    <TextBlock Grid.Row="7" Margin="200,0,0,0" TextWrapping="Wrap" Text="注：pvp，若开启（true），玩家间可互相伤害，关闭请输入false" VerticalAlignment="Center"/>
                                    <TextBlock Grid.Row="8" Margin="200,0,0,0" TextWrapping="Wrap" Text="注：level-name，默认为world，非必要无需更改" VerticalAlignment="Center"/>
                                </Grid>
                                <Grid x:Name="changeServerProperties_Add" Margin="0,10,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition/>
                                        <ColumnDefinition/>
                                        <ColumnDefinition/>
                                    </Grid.ColumnDefinitions>
                                    <Button x:Name="savaServerConfig" Grid.Column="0" Style="{StaticResource ButtonPrimary}" Content="保存" Height="35" Click="saveServerConfig_Click" FontSize="14" HorizontalAlignment="Stretch" Margin="10,0,10,0"/>
                                    <Button x:Name="changeServerIcon" Grid.Column="1" Content="修改服务器图标" Height="35" FontSize="14" Click="changeServerIcon_Click" VerticalAlignment="Top" HorizontalAlignment="Stretch" Margin="10,0,10,0"/>
                                    <Button x:Name="changeWorldMap" Grid.Column="2" Content="更换主世界地图" Click="changeWorldMap_Click" Height="35" FontSize="14" VerticalAlignment="Top" HorizontalAlignment="Stretch" Margin="10,0,10,0"/>
                                    <Button x:Name="setServerconfig" Grid.Column="3" Content="修改更多配置" Height="35" FontSize="14" Click="setServerconfig_Click" VerticalAlignment="Top" HorizontalAlignment="Stretch" Margin="10,0,10,0"/>
                                </Grid>
                                <Grid x:Name="changeServerProperties_Add_Add" Margin="0,10,0,0">
                                    <Grid.Resources>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}"/>
                                        </Style>
                                    </Grid.Resources>
                                    <Rectangle RadiusX="10" RadiusY="10" Stroke="{DynamicResource BorderBrush}" Fill="{DynamicResource BorderBackground}" Height="115"/>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition/>
                                            <ColumnDefinition/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="游戏模式（请根据配置文件的内容来进行选择）" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,10,0,0"/>
                                        <TextBlock Grid.Column="1" Text="游戏难度（请根据配置文件的内容来进行选择）" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,10,0,0"/>
                                    </Grid>
                                    <Rectangle Height="1" Stroke="{DynamicResource BorderBrush}" Margin="0,30,0,0" VerticalAlignment="Top"/>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition/>
                                            <ColumnDefinition/>
                                            <ColumnDefinition/>
                                            <ColumnDefinition/>
                                            <ColumnDefinition/>
                                            <ColumnDefinition/>
                                            <ColumnDefinition/>
                                            <ColumnDefinition/>
                                        </Grid.ColumnDefinitions>
                                        <Rectangle Grid.Column="3" Stroke="{DynamicResource BorderBrush}" Width="1" RenderTransformOrigin="0.5,0.5" HorizontalAlignment="Right"/>
                                        <TextBlock Grid.Column="0" TextWrapping="Wrap" Text="生存" Margin="0,40,0,0" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="1" TextWrapping="Wrap" Text="创造" Margin="0,40,0,0" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="2" TextWrapping="Wrap" Text="冒险" Margin="0,40,0,0" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="3" TextWrapping="Wrap" Text="旁观" Margin="0,40,0,0" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="4" TextWrapping="Wrap" Text="和平" Margin="0,40,0,0" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="5" TextWrapping="Wrap" Text="简单" Margin="0,40,0,0" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="6" TextWrapping="Wrap" Text="普通" Margin="0,40,0,0" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="7" TextWrapping="Wrap" Text="困难" Margin="0,40,0,0" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="0" TextWrapping="Wrap" Text="Survival" Margin="0,65,0,0" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="1" TextWrapping="Wrap" Text="Creative" Margin="0,65,0,0" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="2" TextWrapping="Wrap" Text="Adventure" Margin="0,65,0,0" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="3" TextWrapping="Wrap" Text="Spectator" Margin="0,65,0,0" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="4" TextWrapping="Wrap" Text="Peaceful" Margin="0,65,0,0" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="5" TextWrapping="Wrap" Text="Easy" Margin="0,65,0,0" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="6" TextWrapping="Wrap" Text="Normal" Margin="0,65,0,0" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="7" TextWrapping="Wrap" Text="Hard" Margin="0,65,0,0" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="0" Margin="0,90,0,0" TextWrapping="Wrap" Text="0" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="1" Margin="0,90,0,0" TextWrapping="Wrap" Text="1" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="2" Margin="0,90,0,0" TextWrapping="Wrap" Text="2" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="3" Margin="0,90,0,0" TextWrapping="Wrap" Text="3" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="4" Margin="0,90,0,0" TextWrapping="Wrap" Text="0" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="5" Margin="0,90,0,0" TextWrapping="Wrap" Text="1" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="6" Margin="0,90,0,0" TextWrapping="Wrap" Text="2" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                        <TextBlock Grid.Column="7" Margin="0,90,0,0" TextWrapping="Wrap" Text="3" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                    </Grid>
                                </Grid>
                            </StackPanel>
                        </controls:MagicCard>
                    </controls:MagicScrollViewer>
                </Grid>
            </TabItem>
            <TabItem x:Name="Tab_MoreFunctions" Width="50" Style="{StaticResource TabItemSideMenu}">
                <TabItem.Header>
                    <controls:TabControlHeader Icon="{DynamicResource category_plusDrawingImage}" Text="更多功能"/>
                </TabItem.Header>
                <Grid Style="{StaticResource GridAnimation}">
                    <controls:MagicScrollViewer>
                        <controls:MagicCard Title="开服器功能" Margin="0,10,0,0">
                            <hc:UniformSpacingPanel Spacing="10" Orientation="Vertical">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Label Content="仪表盘功能：" Grid.Column="0" Style="{StaticResource MagicLabel16}"/>
                                    <hc:UniformSpacingPanel Spacing="10" Orientation="Vertical" Grid.Column="1" >
                                        <StackPanel Orientation="Horizontal">
                                            <Label Content="显示占用：" Style="{StaticResource MagicLabel14}"/>
                                            <ToggleButton x:Name="systemInfoBtn" Style="{StaticResource ToggleButtonSwitch.Content}" Click="systemInfoBtn_Click"/>
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal">
                                            <Label Content="记录玩家：" Style="{StaticResource MagicLabel14}"/>
                                            <ToggleButton x:Name="playerInfoBtn" Style="{StaticResource ToggleButtonSwitch.Content}" Click="playerInfoBtn_Click"/>
                                        </StackPanel>
                                    </hc:UniformSpacingPanel>
                                </Grid>
                                <hc:Divider Margin="0"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Label Content="服务器控制：" Grid.Column="0"  Style="{StaticResource MagicLabel16}"/>
                                    <hc:UniformSpacingPanel Spacing="10" Orientation="Vertical"  Grid.Column="1" >
                                        <StackPanel Orientation="Horizontal">
                                            <Label Content="使用高级终端（ConPty）：" Style="{StaticResource MagicLabel14}"/>
                                            <ToggleButton x:Name="useConpty" Style="{StaticResource ToggleButtonSwitch.Content}" Click="useConpty_Click"/>
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal">
                                            <Label Content="关服自动重启：" Style="{StaticResource MagicLabel14}"/>
                                            <ToggleButton x:Name="autoStartserver" Style="{StaticResource ToggleButtonSwitch.Content}" Click="autostartServer_Click"/>
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal">
                                            <Label Content="强制服务器文件UTF8编码：" Style="{StaticResource MagicLabel14}"/>
                                            <ToggleButton x:Name="fileforceUTF8encoding" Style="{StaticResource ToggleButtonSwitch.Content}" Click="fileforceUTF8encoding_Click"/>
                                        </StackPanel>
                                    </hc:UniformSpacingPanel>
                                </Grid>
                                <hc:Divider Margin="0"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Label Content="服务器终端：" Grid.Column="0" Style="{StaticResource MagicLabel16}"/>
                                    <hc:UniformSpacingPanel Spacing="10" Orientation="Vertical" Grid.Column="1">
                                        <Grid x:Name="Tradition_LogFunGrid">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="100"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition/>
                                            </Grid.ColumnDefinitions>
                                            <hc:UniformSpacingPanel Grid.Column="0" Spacing="10" Orientation="Vertical">
                                                <StackPanel Orientation="Horizontal">
                                                    <Label Content="日志输出：" Style="{StaticResource MagicLabel14}"/>
                                                    <ToggleButton x:Name="showOutlog" IsChecked="True" Style="{StaticResource ToggleButtonSwitch.Content}" Click="showOutlog_Click"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal">
                                                    <Label Content="屏蔽堆栈追踪：" Style="{StaticResource MagicLabel14}"/>
                                                    <ToggleButton x:Name="shieldStackOut" IsChecked="True" Style="{StaticResource ToggleButtonSwitch.Content}" Click="shieldStackOut_Click"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal">
                                                    <Label Content="输入编码：" Style="{StaticResource MagicLabel14}"/>
                                                    <Button x:Name="inputCmdEncoding" Content="UTF8" Click="inputCmdEncoding_Click"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal">
                                                    <Label Content="输出编码：" Style="{StaticResource MagicLabel14}"/>
                                                    <Button x:Name="outputCmdEncoding" Content="UTF8" Click="outputCmdEncoding_Click"/>
                                                </StackPanel>
                                            </hc:UniformSpacingPanel>
                                            <Grid Grid.Column="2">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>
                                                <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Top">
                                                    <Label Content="屏蔽关键字日志：" Style="{StaticResource MagicLabel14}"/>
                                                    <ToggleButton x:Name="shieldLogBtn" Style="{StaticResource ToggleButtonSwitch.Content}" Click="shieldLogBtn_Click"/>
                                                </StackPanel>
                                                <ListBox x:Name="ShieldLogList" Grid.Row="1" Margin="0,5,0,5" MaxHeight="80"/>
                                                <Grid Grid.Row="2">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition/>
                                                        <ColumnDefinition Width="5"/>
                                                        <ColumnDefinition/>
                                                    </Grid.ColumnDefinitions>
                                                    <Button x:Name="LogShield_Add" Content="添加屏蔽词" Grid.Column="0" HorizontalAlignment="Stretch" Click="LogShield_Add_Click"/>
                                                    <Button x:Name="LogShield_Del" Content="移除屏蔽词" Grid.Column="2" HorizontalAlignment="Stretch" Click="LogShield_Del_Click"/>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                        <StackPanel Orientation="Horizontal">
                                            <Label Content="自动清屏：" Style="{StaticResource MagicLabel14}"/>
                                            <ToggleButton x:Name="autoClearOutlog" IsChecked="True" Style="{StaticResource ToggleButtonSwitch.Content}" Click="autoClearOutlog_Click"/>
                                        </StackPanel>
                                    </hc:UniformSpacingPanel>
                                </Grid>
                                <hc:Divider x:Name="Tradition_LogFunDivider" Margin="0"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Label Content="其它功能项：" Grid.Column="0" Style="{StaticResource MagicLabel16}"/>
                                    <WrapPanel Grid.Column="1">
                                        <Button x:Name="onlineMode" Content="关闭正版验证" Click="onlineMode_Click" FontSize="14" Margin="0,0,5,5"/>
                                        <Button x:Name="shareLog" Content="上传服务器控制台日志" FontSize="14" Margin="0,0,5,5" Click="shareLog_Click" MouseDoubleClick="controlServer_MouseDoubleClick"/>
                                        <Button x:Name="forgeInstallLogUpload" Content="上传Forge安装日志" FontSize="14" Click="forgeInstallLogUpload_Click" Margin="0,0,5,5"/>
                                        <Button x:Name="GetIPV6" Content="查看IPV6公网地址" FontSize="14" Click="GetIPV6_Click" Margin="0,0,5,5"/>
                                    </WrapPanel>
                                </Grid>
                            </hc:UniformSpacingPanel>
                        </controls:MagicCard>
                        <controls:MagicCard Title="快捷指令栏（非高级终端模式之功能）" Grid.Row="1" Margin="0,0,0,20">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="auto"/>
                                    <ColumnDefinition Width="auto"/>
                                </Grid.ColumnDefinitions>
                                <ListBox x:Name="fastCmdList" Margin="5" Grid.Column="0" Height="160"/>
                                <StackPanel Grid.Column="1">
                                    <Button x:Name="refrushFastCmd" Content="刷新" Height="70" Width="110" Click="refrushFastCmd_Click" FontSize="18" VerticalAlignment="Top" HorizontalAlignment="Center" Margin="0,5,0,0"/>
                                    <Button x:Name="addFastCmd" Content="添加" Margin="5" Height="40" Width="110" Click="addFastCmd_Click" FontSize="18" VerticalAlignment="Top" HorizontalAlignment="Right" />
                                    <Button x:Name="delFastCmd" Content="删除" Height="40" Width="110" Click="delFastCmd_Click" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,0,0,5" />
                                </StackPanel>
                                <Button Grid.Column="2" x:Name="resetFastCmd" Content="重置" Width="110" Height="160" Click="resetFastCmd_Click" FontSize="18" HorizontalAlignment="Right"/>
                            </Grid>
                        </controls:MagicCard>
                    </controls:MagicScrollViewer>
                </Grid>
            </TabItem>
            <TabItem x:Name="Tab_Timer" Width="50" Style="{StaticResource TabItemSideMenu}">
                <TabItem.Header>
                    <controls:TabControlHeader Icon="{DynamicResource alarmDrawingImage}" Text="定时任务"/>
                </TabItem.Header>
                <Grid Style="{StaticResource GridAnimation}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <controls:MagicCard Title="任务列表" Grid.Row="0" Margin="10,10,10,0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <ListBox Grid.Column="0" x:Name="tasksList" hc:Empty.ShowEmpty="true" SelectionChanged="tasksList_SelectionChanged"/>
                                <Grid Grid.Column="1" Margin="10,0,0,0" HorizontalAlignment="Right">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="80"/>
                                        <RowDefinition Height="90"/>
                                        <RowDefinition Height="70"/>
                                    </Grid.RowDefinitions>
                                    <Button Grid.Row="0" x:Name="addTask" Height="80" Width="300" Click="addTask_Click" Content="添加新任务" FontSize="18"/>
                                    <Button Grid.Row="1" x:Name="delTask" Height="80" Width="300" Click="delTask_Click" FontSize="18" Content="删除所选任务"/>
                                    <Button Grid.Row="2" x:Name="loadOrSaveTaskConfig" Height="70" Width="145" Click="LoadOrSaveTaskConfig_Click" FontSize="18" Content="加载任务配置" HorizontalAlignment="Left"/>
                                    <Button Grid.Row="2" x:Name="delTaskConfig" Height="70" Width="145" Click="delTaskConfig_Click" FontSize="18" Content="清除任务配置" HorizontalAlignment="Right"/>
                                </Grid>
                            </Grid>
                        </controls:MagicCard>
                        <Border Style="{StaticResource MagicBorder}" Grid.Row="1" VerticalAlignment="Bottom" Margin="10">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                </Grid.RowDefinitions>
                                <Label Grid.Row="0" Content="任务设置（请先添加任务，然后选择一个任务进行更改）" Style="{StaticResource BorderTitle}" />
                                <Grid Grid.Row="1">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0" Orientation="Horizontal">
                                        <Label Content="周期：" FontSize="16" Height="32" BorderThickness="0" Background="Transparent" Width="60"/>
                                        <TextBox x:Name="timercmdTime" Width="100" Height="32" InputMethod.IsInputMethodEnabled="False" PreviewTextInput="NumberValidationTextBox" TextChanged="timercmdTime_TextChanged"/>
                                        <ComboBox x:Name="TaskUnit" Margin="5,0" FontSize="16" Height="32" SelectionChanged="TaskUnit_SelectionChanged">
                                            <ComboBoxItem Content="秒（s）" IsSelected="True"/>
                                            <ComboBoxItem Content="毫秒（ms）"/>
                                        </ComboBox>
                                    </StackPanel>
                                    <Label Grid.Column="1" Content="指令：" FontSize="16" HorizontalAlignment="Left" VerticalAlignment="Top" Width="60" Height="32" BorderBrush="{x:Null}" BorderThickness="0" Margin="10,0,0,0"/>
                                    <TextBox Grid.Column="1" x:Name="timercmdCmd" VerticalAlignment="Top" Height="32" Margin="70,0,0,0" TextChanged="timercmdCmd_TextChanged"/>
                                </Grid>
                                <Grid Grid.Row="2" Margin="0,5,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0" Orientation="Horizontal">
                                        <Label Content="上次执行结果：" FontSize="16" BorderThickness="0" Background="Transparent"/>
                                        <TextBlock x:Name="timerCmdout" Text="无" FontSize="14" Foreground="{DynamicResource PrimaryTextBrush}" VerticalAlignment="Center" TextWrapping="Wrap"/>
                                    </StackPanel>
                                    <Button Grid.Column="1" x:Name="startTimercmd" Height="36" Width="120" Content="启动定时任务" Click="startTimercmd_Click" Margin="5,0,0,0"/>
                                </Grid>
                                
                            </Grid>
                        </Border>
                    </Grid>
                </Grid>
            </TabItem>
        </TabControl>
        <Button x:Name="SideMenuContextOpen" HorizontalAlignment="Left" VerticalAlignment="Bottom" Width="50" Height="42" BorderThickness="0" Background="Transparent" Click="SideMenuContextOpen_Click">
            <Path Stroke="{DynamicResource PrimaryTextBrush}" StrokeThickness="1.5">
                <Path.Data>
                    <GeometryGroup>
                        <PathGeometry Figures="M 0 0 h 15"/>
                        <PathGeometry Figures="M 0 5 h 15"/>
                        <PathGeometry Figures="M 0 10 h 15"/>
                    </GeometryGroup>
                </Path.Data>
            </Path>
        </Button>
        <Popup x:Name="ConptyPopUp" IsOpen="False" AllowsTransparency="True" Placement="Relative"
       Width="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=Window}}" 
       Height="{Binding ActualHeight, RelativeSource={RelativeSource AncestorType=Window}}">
            <ScrollViewer VerticalScrollBarVisibility="Hidden" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Hidden" HorizontalAlignment="Right" VerticalAlignment="Top">
                    <StackPanel x:Name="ConptyGrowlPanel" hc:Growl.GrowlParent="True" VerticalAlignment="Top" Margin="0,10,10,10" />
                </ScrollViewer>
            </ScrollViewer>
        </Popup>
        <ScrollViewer VerticalScrollBarVisibility="Hidden" HorizontalAlignment="Right" VerticalAlignment="Top">
            <StackPanel Name="GrowlPanel" hc:Growl.GrowlParent="True" VerticalAlignment="Top" Margin="0,10,10,10" />
        </ScrollViewer>
    </Grid>
</hc:Window>
